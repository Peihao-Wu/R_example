(this["webpackJsonpmarkdown-nice-editor"]=this["webpackJsonpmarkdown-nice-editor"]||[]).push([[5],{215:function(e,t,n){var s={"./bmp":216,"./bmp.js":216,"./gif":217,"./gif.js":217,"./jpg":218,"./jpg.js":218,"./png":219,"./png.js":219,"./psd":220,"./psd.js":220,"./svg":221,"./svg.js":221,"./tiff":222,"./tiff.js":222,"./webp":223,"./webp.js":223};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=function(){return Object.keys(s)},a.resolve=r,e.exports=a,a.id=215},266:function(e,t,n){},328:function(e,t,n){e.exports=n(726)},333:function(e,t,n){},345:function(e,t,n){var s={"./apl/apl.js":[742,28],"./asciiarmor/asciiarmor.js":[743,29],"./asn.1/asn.1.js":[744,30],"./asterisk/asterisk.js":[745,31],"./brainfuck/brainfuck.js":[746,32],"./clike/clike.js":[731,1],"./clojure/clojure.js":[747,33],"./cmake/cmake.js":[748,34],"./cobol/cobol.js":[749,35],"./coffeescript/coffeescript.js":[732,36],"./commonlisp/commonlisp.js":[750,37],"./crystal/crystal.js":[751,38],"./css/css.js":[174],"./cypher/cypher.js":[752,39],"./d/d.js":[753,40],"./dart/dart.js":[754,1,41],"./diff/diff.js":[755,42],"./django/django.js":[756,0,10],"./dockerfile/dockerfile.js":[757,20],"./dtd/dtd.js":[758,43],"./dylan/dylan.js":[759,44],"./ebnf/ebnf.js":[760,45],"./ecl/ecl.js":[761,46],"./eiffel/eiffel.js":[762,47],"./elm/elm.js":[763,48],"./erlang/erlang.js":[764,49],"./factor/factor.js":[765,21],"./fcl/fcl.js":[766,50],"./forth/forth.js":[767,51],"./fortran/fortran.js":[768,52],"./gas/gas.js":[769,53],"./gfm/gfm.js":[770,3,19],"./gherkin/gherkin.js":[771,54],"./go/go.js":[772,55],"./groovy/groovy.js":[773,56],"./haml/haml.js":[774,0,13],"./handlebars/handlebars.js":[733,15],"./haskell-literate/haskell-literate.js":[775,24],"./haskell/haskell.js":[734,57],"./haxe/haxe.js":[776,58],"./htmlembedded/htmlembedded.js":[777,0,9],"./htmlmixed/htmlmixed.js":[728,0,25],"./http/http.js":[778,59],"./idl/idl.js":[779,60],"./javascript/javascript.js":[729,0],"./jinja2/jinja2.js":[780,61],"./jsx/jsx.js":[781,0,26],"./julia/julia.js":[782,62],"./livescript/livescript.js":[783,63],"./lua/lua.js":[784,64],"./markdown/markdown.js":[739,3],"./mathematica/mathematica.js":[785,65],"./mbox/mbox.js":[786,66],"./meta.js":[175],"./mirc/mirc.js":[787,67],"./mllike/mllike.js":[788,68],"./modelica/modelica.js":[789,69],"./mscgen/mscgen.js":[790,70],"./mumps/mumps.js":[791,71],"./nginx/nginx.js":[792,72],"./nsis/nsis.js":[793,22],"./ntriples/ntriples.js":[794,73],"./octave/octave.js":[795,74],"./oz/oz.js":[796,75],"./pascal/pascal.js":[797,76],"./pegjs/pegjs.js":[798,0,77],"./perl/perl.js":[799,78],"./php/php.js":[800,0,1,16],"./pig/pig.js":[801,79],"./powershell/powershell.js":[802,80],"./properties/properties.js":[803,81],"./protobuf/protobuf.js":[804,82],"./pug/pug.js":[740,0,2],"./puppet/puppet.js":[805,83],"./python/python.js":[735,84],"./q/q.js":[806,85],"./r/r.js":[807,86],"./rpm/rpm.js":[808,87],"./rst/rst.js":[809,12],"./ruby/ruby.js":[730,88],"./rust/rust.js":[810,23],"./sas/sas.js":[811,89],"./sass/sass.js":[737,90],"./scheme/scheme.js":[812,91],"./shell/shell.js":[813,92],"./sieve/sieve.js":[814,93],"./slim/slim.js":[815,0,14],"./smalltalk/smalltalk.js":[816,94],"./smarty/smarty.js":[817,95],"./solr/solr.js":[818,96],"./soy/soy.js":[819,0,17],"./sparql/sparql.js":[820,97],"./spreadsheet/spreadsheet.js":[821,98],"./sql/sql.js":[822,99],"./stex/stex.js":[736,100],"./stylus/stylus.js":[741,4],"./swift/swift.js":[823,101],"./tcl/tcl.js":[824,102],"./textile/textile.js":[825,103],"./tiddlywiki/tiddlywiki.js":[826,104],"./tiki/tiki.js":[827,105],"./toml/toml.js":[828,106],"./tornado/tornado.js":[829,0,11],"./troff/troff.js":[830,107],"./ttcn-cfg/ttcn-cfg.js":[832,108],"./ttcn/ttcn.js":[831,109],"./turtle/turtle.js":[833,110],"./twig/twig.js":[834,18],"./vb/vb.js":[835,111],"./vbscript/vbscript.js":[836,112],"./velocity/velocity.js":[837,113],"./verilog/verilog.js":[838,114],"./vhdl/vhdl.js":[839,115],"./vue/vue.js":[840,0,4,2,8],"./webidl/webidl.js":[841,116],"./xml/xml.js":[727,117],"./xquery/xquery.js":[842,118],"./yacas/yacas.js":[843,119],"./yaml-frontmatter/yaml-frontmatter.js":[844,27],"./yaml/yaml.js":[738,120],"./z80/z80.js":[845,121]};function a(e){if(!n.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],a=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n.t(a,7)}))}a.keys=function(){return Object.keys(s)},a.id=345,e.exports=a},623:function(e,t){},648:function(e,t){},721:function(e,t,n){},722:function(e,t,n){},726:function(e,t,n){"use strict";n.r(t);var s=n(2),a=n.n(s),r=n(15),i=n.n(r),o=(n(333),n(21)),l=n.n(o),c=n(35),u=n(4),m=n(5),p=n(8),d=n(6),j=n(7),f=n(325),h=n(323),v=n.n(h),w=(n(704),n(126)),g=n.n(w),y=n(847),k=n(849),b=n(326),x=n(127),E="\u672a\u547d\u540d\u6587\u7ae0",O="\u672a\u547d\u540d\u4e3b\u9898",S="markdown",B="css",z="username",C="avatar",T="userId",M="email",N="token",A=function(e){var t=document.cookie.split(";"),n=!0,s=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var o=r.value.trim().split("=");if(o[0]===e)return o[1]}}catch(l){s=!0,a=l}finally{try{n||null==i.return||i.return()}finally{if(s)throw a}}return null},D=function(e){document.cookie="".concat(e,"=; domain=.mdnice.com; path=/; expires=").concat(new Date(0),";")},q=function(){var e=window.location.search.substr(1);e=e.split("&");for(var t={},n=0;n<e.length;n++){var s=e[n].split("=");2===s.length&&(t[s[0]]=s[1])}return t},I=(n(266),function(e){var t=e.fill,n=void 0===t?"rgba(0,0,0,0.65)":t,s=e.style,r=void 0===s?{}:s,i=e.className,o=void 0===i?"icon":i,l=e.viewBox,c=void 0===l?"0 0 1024 1024":l;return a.a.createElement("svg",{style:r,viewBox:c,className:o,fill:n,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},a.a.createElement("path",{d:"M972.8 768v102.4H51.2v-102.4h921.6zM51.2 460.8h921.6v102.4H51.2V460.8z m921.6-307.2v102.4H51.2V153.6h921.6z",fill:"#1B1B1B","p-id":"5952"}))}),_=function(e){var t=e.fill,n=void 0===t?"rgba(0,0,0,0.65)":t,s=e.style,r=void 0===s?{}:s,i=e.className,o=void 0===i?"icon":i,l=e.viewBox,c=void 0===l?"0 0 1024 1024":l;return a.a.createElement("svg",{style:r,viewBox:c,className:o,fill:n,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},a.a.createElement("path",{d:"M512 16C238 16 16 238 16 512s222 496 496 496 496-222 496-496S786 16 512 16z m256 843.2c-71.8 53-160.2 84.8-256 84.8s-184.2-31.8-256-84.8V832c0-70.6 57.4-128 128-128 22.2 0 55 22.8 128 22.8 73.2 0 105.6-22.8 128-22.8 70.6 0 128 57.4 128 128v27.2z m61.2-55c-13.6-92.8-92.6-164.2-189.2-164.2-41 0-60.8 22.8-128 22.8S425.2 640 384 640c-96.6 0-175.6 71.4-189.2 164.2C123.8 727.2 80 624.8 80 512c0-238.2 193.8-432 432-432s432 193.8 432 432c0 112.8-43.8 215.2-114.8 292.2zM512 240c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176z m0 288c-61.8 0-112-50.2-112-112s50.2-112 112-112 112 50.2 112 112-50.2 112-112 112z","p-id":"5538"}))},P=function(e){switch(e.name){case"menu":return a.a.createElement(I,e);case"user":return a.a.createElement(_,e);default:return a.a.createElement("svg",null)}},L=(n(721),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).login=function(){window.open("about:blank").location.href="https://preview.mdnice.com/login"},n.handleExit=function(){D(z),D(C),D(T),D(M),D(N),n.setState({token:"",username:""})},n.state={token:A(N),username:A(z)},n}return Object(j.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("visibilitychange",(function(){if("visible"==document.visibilityState){var t=A(N),n=A(z);t?e.setState({token:t,username:n}):e.handleExit()}}))}},{key:"render",value:function(){var e=this.state,t=e.token,n=e.username,s=a.a.createElement(y.a,null,a.a.createElement(y.a.Item,null,a.a.createElement("a",{onClick:this.handleExit},"\u9000\u51fa\u767b\u5f55")));return a.a.createElement(a.a.Fragment,null,t?a.a.createElement(k.a,{overlay:s,placement:"bottomRight"},a.a.createElement("span",{className:"nice-username"},n)):a.a.createElement(b.a,{placement:"bottom",mouseEnterDelay:.5,mouseLeaveDelay:0,title:"\u767b\u5f55"},a.a.createElement(x.a,{shape:"circle",className:"nice-btn-login",onClick:this.login},a.a.createElement(P,{name:"user",className:"nice-btn-login-icon"}))))}}]),t}(a.a.Component)),H=[{element:".nice-navbar",popover:{title:"\u5bfc\u822a\u680f",description:"\u5305\u542b\u7f16\u8f91\u529f\u80fd\u548c\u7279\u6b8a\u529f\u80fd",position:"bottom-center"}},{element:".nice-btn-wechat",popover:{title:"\u590d\u5236\u5230\u516c\u4f17\u53f7",description:"\u70b9\u51fb\u540e\u7c98\u8d34\u5230\u5fae\u4fe1\u516c\u4f17\u53f7\u4e2d\u5373\u53ef",position:"left"}},{element:".nice-btn-zhihu",popover:{title:"\u590d\u5236\u5230\u77e5\u4e4e",description:"\u70b9\u51fb\u540e\u7c98\u8d34\u5230\u77e5\u4e4e\u4e2d\u5373\u53ef",position:"left"}},{element:".nice-btn-juejin",popover:{title:"\u590d\u5236\u5230\u7a00\u571f\u6398\u91d1",description:"\u70b9\u51fb\u540e\u7c98\u8d34\u5230\u7a00\u571f\u6398\u91d1\u4e2d\u5373\u53ef",position:"left"}},{element:".nice-btn-previewtype",popover:{title:"\u9884\u89c8\u6a21\u5f0f",description:"\u5305\u542b\u79fb\u52a8\u7aef\u9884\u89c8\u548c PC \u7aef\u9884\u89c8",position:"left"}},{element:"#nice-md-editor",popover:{title:"\u7f16\u8f91\u5668",description:"\u7f16\u5199 markdown \u7684\u4f4d\u7f6e",position:"right"}},{element:"#nice-rich-text",popover:{title:"\u9884\u89c8",description:"\u67e5\u770b\u6548\u679c",position:"left"}},{element:".nice-footer-container",popover:{title:"\u5e95\u90e8\u72b6\u6001\u680f",description:"\u67e5\u770b\u5b57\u6570\u3001\u884c\u6570\u7b49\u4fe1\u606f",position:"top-center"}}],U=(n(722),function(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!0,s=0;s<t.length;s++)if(e.indexOf(t[s])>0){n=!1;break}return n}),F=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).componentDidMount=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===window.localStorage.getItem("is_first_use")&&U()&&((t=new v.a({doneBtnText:"\u5b8c\u6210",closeBtnText:"\u5173\u95ed",nextBtnText:"\u524d\u8fdb",prevBtnText:"\u540e\u9000",opacity:.5})).defineSteps(H),t.start(),window.localStorage.setItem("is_first_use",!1)),window.addEventListener("beforeunload",(function(){n.uploadArticle(n.state.content),n.uploadStyle(n.state.style)})),i.a.render(a.a.createElement(L,{token:n.state.token}),document.getElementsByClassName("nice-right-nav")[0]);case 4:case"end":return e.stop()}}),e)}))),n.handleMenu=function(){n.setState({isMenuOpen:!n.state.isMenuOpen})},n.handleTextChange=function(e){n.setState({content:e})},n.handleTextBlur=function(e){n.uploadArticle(e)},n.uploadArticle=function(){var e=Object(c.a)(l.a.mark((function e(t){var s,a,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.state.token,!n.state.token){e.next=18;break}if(void 0!==(a=q()).id){e.next=13;break}return e.next=6,g.a.post("https://api.mdnice.com/editors",{title:E,type:S,content:t},{headers:{Authorization:"Bearer ".concat(s)}});case 6:if((r=e.sent).data.success){e.next=9;break}throw new Error;case 9:i="?id=".concat(r.data.data),window.history.pushState({url:i},"",i),e.next=18;break;case 13:return e.next=15,g.a.put("https://api.mdnice.com/editors",{title:E,type:S,content:t,id:a.id},{headers:{Authorization:"Bearer ".concat(s)}});case 15:if(e.sent.data.success){e.next=18;break}throw new Error;case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleStyleChange=function(e){n.setState({style:e})},n.handleStyleBlur=function(e){n.uploadStyle(e)},n.uploadStyle=function(){var e=Object(c.a)(l.a.mark((function e(t){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=n.state.token)){e.next=7;break}return e.next=4,g.a.post("https://api.mdnice.com/editors",{title:O,type:B,content:t},{headers:{Authorization:"Bearer ".concat(s)}});case 4:if(e.sent.data.success){e.next=7;break}throw new Error;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={isMenuOpen:!1,content:window.localStorage.getItem("content"),style:window.localStorage.getItem("style"),token:A(N)},n}return Object(j.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.token;return a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(f.a,{defaultTitle:"Markdown Nice",useImageHosting:{url:"https://imgkr.com/api/v2/files/upload",name:"\u56fe\u58f3",isAliyunOpen:!0},defaultText:this.state.content,onTextChange:this.handleTextChange,onTextBlur:this.handleTextBlur,onStyleChange:this.handleStyleChange,onStyleBlur:this.handleStyleBlur,token:e}))}}]),t}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=n(324),W=n(30);i.a.render(a.a.createElement(V.a,null,a.a.createElement(W.c,null,a.a.createElement(W.a,{exact:!0,path:"/",component:F}),a.a.createElement(W.a,{path:"/article/:id",component:F}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[328,6,7]]]);
//# sourceMappingURL=main.29adf6a5.chunk.js.map